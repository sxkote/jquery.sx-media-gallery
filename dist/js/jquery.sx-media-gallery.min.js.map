{"version":3,"sources":["jquery.sx-media-gallery.min.js"],"names":["_classCallCheck","instance","Constructor","TypeError","thisModule","define","amd","module","exports","jQuery","undefined","Timer","fn","trigger","time","active","callback","requestFrame","running","this","kick","end","cb","returnTrue","returnFalse","preventDefault","e","preventIgnoreTags","ignoreTags","target","tagName","toLowerCase","isLeftButton","which","ctrlKey","altKey","identifiedTouch","touchList","id","i","l","length","identifier","changedTouch","event","touch","changedTouches","pageX","pageY","mousedown","data","startX","startY","timeStamp","add","document","mouseevents","move","mousemove","cancel","mouseend","checkThreshold","removeMouse","remove","touchstart","template","touchevents","touchmove","touchend","removeTouch","distX","distY","threshold","triggerStart","handled","_handled","flagAsHandled","touches","targetTouches","type","deltaX","deltaY","velocityX","velocityY","finger","_preventTouchmoveDefault","activeMousemove","timer","activeMouseend","removeActiveMouse","endEvent","setTimeout","activeTouchmove","activeTouchend","removeActiveTouch","updateEvent","setup","namespaces","eventHandle","teardown","addMethod","handleObj","namespace","guid","selector","removeMethod","node","window","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","element","textarea","input","select","button","special","movestart","_default","update","noop","moveend","Array","prototype","indexOf","props","push","w","h","currentTarget","offsetWidth","offsetHeight","settings","sensitivity","getData","count","swipe","swipeleft","swiperight","swipeup","swipedown","_typeof","Symbol","iterator","obj","constructor","_createClass","defineProperties","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","$","pluginName","pluginPrefix","FileType","File","Image","Video","Audio","PDF","Excel","Word","PowerPoint","Text","ZIP","IconCollection","Close","Menu","Download","Profile","ArrowLeft","ArrowRight","extendDefaults","source","properties","property","hasOwnProperty","SXMediaMaterial","url","thumbnail","title","comment","date","Date","defineFileType","value","get","dateString","year","getFullYear","month","getMonth","toString","day","getDate","filename","extenstion","substring","lastIndexOf","SXMediaGalleryViewer","options","_defaults","width","height","infoVisible","_options","_prefix","_element","_info","SXMediaGalleryViewerInfo","visible","append","info","material","prefix","Error","clear","_content","css","load","_contentOriginalWidth","_contentOriginalHeight","resize","bind","content","PDFObject","embed","displayMaterial","margins","marginTop","top","marginBottom","bottom","isVisible","innerHeight","coefficient","Math","min","margin-top","margin-bottom","elementDOM","split","xhr","XMLHttpRequest","responseType","onload","a","createElement","href","URL","createObjectURL","response","download","style","display","appendChild","click","removeChild","open","send","_material","set","result","_date","_title","_header","_comment","_isVisible","show","hide","text","SXMediaGalleryButton","name","src","handler","isActive","addClass","removeClass","SXMediaGalleryMenu","_buttons","buttons","findButton","changeState","SXMediaGalleryDesk","_materials","clickHandler","materials","item","SXMediaGalleryPanel","allowDuplicates","stopPropagation","on","movePrevious","moveNext","menu","changeButtonState","create","_viewer","viewer","_desk","desk","_menu","addButton","toggle","close","findMaterial","addMaterial","index","moveTo","right","left","SXMediaGallery","extend","_panel","panel","reload","items","find","each"],"mappings":"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","file":"jquery.sx-media-gallery.min.js","sourcesContent":["'use strict';\n\n// jquery.event.move\n//\n// 1.3.6\n//\n// Stephen Band\n//\n// Triggers 'movestart', 'move' and 'moveend' events after\n// mousemoves following a mousedown cross a distance threshold,\n// similar to the native 'dragstart', 'drag' and 'dragend' events.\n// Move events are throttled to animation frames. Move event objects\n// have the properties:\n//\n// pageX:\n// pageY:   Page coordinates of pointer.\n// startX:\n// startY:  Page coordinates of pointer at movestart.\n// distX:\n// distY:  Distance the pointer has moved since movestart.\n// deltaX:\n// deltaY:  Distance the finger has moved since last event.\n// velocityX:\n// velocityY:  Average velocity over last few events.\n\n(function (thisModule) {\n\tif (typeof define === 'function' && define.amd) {\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine(['jquery'], thisModule);\n\t} else if (typeof module !== \"undefined\" && module !== null && module.exports) {\n\t\tmodule.exports = thisModule;\n\t} else {\n\t\t// Browser globals\n\t\tthisModule(jQuery);\n\t}\n})(function (jQuery, undefined) {\n\n\tvar // Number of pixels a pressed pointer travels before movestart\n\t// event is fired.\n\tthreshold = 6,\n\t    add = jQuery.event.add,\n\t    remove = jQuery.event.remove,\n\n\n\t// Just sugar, so we can have arguments in the same order as\n\t// add and remove.\n\ttrigger = function trigger(node, type, data) {\n\t\tjQuery.event.trigger(type, data, node);\n\t},\n\n\n\t// Shim for requestAnimationFrame, falling back to timer. See:\n\t// see http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n\trequestFrame = function () {\n\t\treturn window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function (fn, element) {\n\t\t\treturn window.setTimeout(function () {\n\t\t\t\tfn();\n\t\t\t}, 25);\n\t\t};\n\t}(),\n\t    ignoreTags = {\n\t\ttextarea: true,\n\t\tinput: true,\n\t\tselect: true,\n\t\tbutton: true\n\t},\n\t    mouseevents = {\n\t\tmove: 'mousemove',\n\t\tcancel: 'mouseup dragstart',\n\t\tend: 'mouseup'\n\t},\n\t    touchevents = {\n\t\tmove: 'touchmove',\n\t\tcancel: 'touchend',\n\t\tend: 'touchend'\n\t};\n\n\t// Constructors\n\n\tfunction Timer(fn) {\n\t\tvar callback = fn,\n\t\t    active = false,\n\t\t    running = false;\n\n\t\tfunction trigger(time) {\n\t\t\tif (active) {\n\t\t\t\tcallback();\n\t\t\t\trequestFrame(trigger);\n\t\t\t\trunning = true;\n\t\t\t\tactive = false;\n\t\t\t} else {\n\t\t\t\trunning = false;\n\t\t\t}\n\t\t}\n\n\t\tthis.kick = function (fn) {\n\t\t\tactive = true;\n\t\t\tif (!running) {\n\t\t\t\ttrigger();\n\t\t\t}\n\t\t};\n\n\t\tthis.end = function (fn) {\n\t\t\tvar cb = callback;\n\n\t\t\tif (!fn) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// If the timer is not running, simply call the end callback.\n\t\t\tif (!running) {\n\t\t\t\tfn();\n\t\t\t}\n\t\t\t// If the timer is running, and has been kicked lately, then\n\t\t\t// queue up the current callback and the end callback, otherwise\n\t\t\t// just the end callback.\n\t\t\telse {\n\t\t\t\t\tcallback = active ? function () {\n\t\t\t\t\t\tcb();fn();\n\t\t\t\t\t} : fn;\n\n\t\t\t\t\tactive = true;\n\t\t\t\t}\n\t\t};\n\t}\n\n\t// Functions\n\n\tfunction returnTrue() {\n\t\treturn true;\n\t}\n\n\tfunction returnFalse() {\n\t\treturn false;\n\t}\n\n\tfunction preventDefault(e) {\n\t\te.preventDefault();\n\t}\n\n\tfunction preventIgnoreTags(e) {\n\t\t// Don't prevent interaction with form elements.\n\t\tif (ignoreTags[e.target.tagName.toLowerCase()]) {\n\t\t\treturn;\n\t\t}\n\n\t\te.preventDefault();\n\t}\n\n\tfunction isLeftButton(e) {\n\t\t// Ignore mousedowns on any button other than the left (or primary)\n\t\t// mouse button, or when a modifier key is pressed.\n\t\treturn e.which === 1 && !e.ctrlKey && !e.altKey;\n\t}\n\n\tfunction identifiedTouch(touchList, id) {\n\t\tvar i, l;\n\n\t\tif (touchList.identifiedTouch) {\n\t\t\treturn touchList.identifiedTouch(id);\n\t\t}\n\n\t\t// touchList.identifiedTouch() does not exist in\n\t\t// webkit yet… we must do the search ourselves...\n\n\t\ti = -1;\n\t\tl = touchList.length;\n\n\t\twhile (++i < l) {\n\t\t\tif (touchList[i].identifier === id) {\n\t\t\t\treturn touchList[i];\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction changedTouch(e, event) {\n\t\tvar touch = identifiedTouch(e.changedTouches, event.identifier);\n\n\t\t// This isn't the touch you're looking for.\n\t\tif (!touch) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Chrome Android (at least) includes touches that have not\n\t\t// changed in e.changedTouches. That's a bit annoying. Check\n\t\t// that this touch has changed.\n\t\tif (touch.pageX === event.pageX && touch.pageY === event.pageY) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn touch;\n\t}\n\n\t// Handlers that decide when the first movestart is triggered\n\n\tfunction mousedown(e) {\n\t\tvar data;\n\n\t\tif (!isLeftButton(e)) {\n\t\t\treturn;\n\t\t}\n\n\t\tdata = {\n\t\t\ttarget: e.target,\n\t\t\tstartX: e.pageX,\n\t\t\tstartY: e.pageY,\n\t\t\ttimeStamp: e.timeStamp\n\t\t};\n\n\t\tadd(document, mouseevents.move, mousemove, data);\n\t\tadd(document, mouseevents.cancel, mouseend, data);\n\t}\n\n\tfunction mousemove(e) {\n\t\tvar data = e.data;\n\n\t\tcheckThreshold(e, data, e, removeMouse);\n\t}\n\n\tfunction mouseend(e) {\n\t\tremoveMouse();\n\t}\n\n\tfunction removeMouse() {\n\t\tremove(document, mouseevents.move, mousemove);\n\t\tremove(document, mouseevents.cancel, mouseend);\n\t}\n\n\tfunction touchstart(e) {\n\t\tvar touch, template;\n\n\t\t// Don't get in the way of interaction with form elements.\n\t\tif (ignoreTags[e.target.tagName.toLowerCase()]) {\n\t\t\treturn;\n\t\t}\n\n\t\ttouch = e.changedTouches[0];\n\n\t\t// iOS live updates the touch objects whereas Android gives us copies.\n\t\t// That means we can't trust the touchstart object to stay the same,\n\t\t// so we must copy the data. This object acts as a template for\n\t\t// movestart, move and moveend event objects.\n\t\ttemplate = {\n\t\t\ttarget: touch.target,\n\t\t\tstartX: touch.pageX,\n\t\t\tstartY: touch.pageY,\n\t\t\ttimeStamp: e.timeStamp,\n\t\t\tidentifier: touch.identifier\n\t\t};\n\n\t\t// Use the touch identifier as a namespace, so that we can later\n\t\t// remove handlers pertaining only to this touch.\n\t\tadd(document, touchevents.move + '.' + touch.identifier, touchmove, template);\n\t\tadd(document, touchevents.cancel + '.' + touch.identifier, touchend, template);\n\t}\n\n\tfunction touchmove(e) {\n\t\tvar data = e.data,\n\t\t    touch = changedTouch(e, data);\n\n\t\tif (!touch) {\n\t\t\treturn;\n\t\t}\n\n\t\tcheckThreshold(e, data, touch, removeTouch);\n\t}\n\n\tfunction touchend(e) {\n\t\tvar template = e.data,\n\t\t    touch = identifiedTouch(e.changedTouches, template.identifier);\n\n\t\tif (!touch) {\n\t\t\treturn;\n\t\t}\n\n\t\tremoveTouch(template.identifier);\n\t}\n\n\tfunction removeTouch(identifier) {\n\t\tremove(document, '.' + identifier, touchmove);\n\t\tremove(document, '.' + identifier, touchend);\n\t}\n\n\t// Logic for deciding when to trigger a movestart.\n\n\tfunction checkThreshold(e, template, touch, fn) {\n\t\tvar distX = touch.pageX - template.startX,\n\t\t    distY = touch.pageY - template.startY;\n\n\t\t// Do nothing if the threshold has not been crossed.\n\t\tif (distX * distX + distY * distY < threshold * threshold) {\n\t\t\treturn;\n\t\t}\n\n\t\ttriggerStart(e, template, touch, distX, distY, fn);\n\t}\n\n\tfunction handled() {\n\t\t// this._handled should return false once, and after return true.\n\t\tthis._handled = returnTrue;\n\t\treturn false;\n\t}\n\n\tfunction flagAsHandled(e) {\n\t\te._handled();\n\t}\n\n\tfunction triggerStart(e, template, touch, distX, distY, fn) {\n\t\tvar node = template.target,\n\t\t    touches,\n\t\t    time;\n\n\t\ttouches = e.targetTouches;\n\t\ttime = e.timeStamp - template.timeStamp;\n\n\t\t// Create a movestart object with some special properties that\n\t\t// are passed only to the movestart handlers.\n\t\ttemplate.type = 'movestart';\n\t\ttemplate.distX = distX;\n\t\ttemplate.distY = distY;\n\t\ttemplate.deltaX = distX;\n\t\ttemplate.deltaY = distY;\n\t\ttemplate.pageX = touch.pageX;\n\t\ttemplate.pageY = touch.pageY;\n\t\ttemplate.velocityX = distX / time;\n\t\ttemplate.velocityY = distY / time;\n\t\ttemplate.targetTouches = touches;\n\t\ttemplate.finger = touches ? touches.length : 1;\n\n\t\t// The _handled method is fired to tell the default movestart\n\t\t// handler that one of the move events is bound.\n\t\ttemplate._handled = handled;\n\n\t\t// Pass the touchmove event so it can be prevented if or when\n\t\t// movestart is handled.\n\t\ttemplate._preventTouchmoveDefault = function () {\n\t\t\te.preventDefault();\n\t\t};\n\n\t\t// Trigger the movestart event.\n\t\ttrigger(template.target, template);\n\n\t\t// Unbind handlers that tracked the touch or mouse up till now.\n\t\tfn(template.identifier);\n\t}\n\n\t// Handlers that control what happens following a movestart\n\n\tfunction activeMousemove(e) {\n\t\tvar timer = e.data.timer;\n\n\t\te.data.touch = e;\n\t\te.data.timeStamp = e.timeStamp;\n\t\ttimer.kick();\n\t}\n\n\tfunction activeMouseend(e) {\n\t\tvar event = e.data.event,\n\t\t    timer = e.data.timer;\n\n\t\tremoveActiveMouse();\n\n\t\tendEvent(event, timer, function () {\n\t\t\t// Unbind the click suppressor, waiting until after mouseup\n\t\t\t// has been handled.\n\t\t\tsetTimeout(function () {\n\t\t\t\tremove(event.target, 'click', returnFalse);\n\t\t\t}, 0);\n\t\t});\n\t}\n\n\tfunction removeActiveMouse(event) {\n\t\tremove(document, mouseevents.move, activeMousemove);\n\t\tremove(document, mouseevents.end, activeMouseend);\n\t}\n\n\tfunction activeTouchmove(e) {\n\t\tvar event = e.data.event,\n\t\t    timer = e.data.timer,\n\t\t    touch = changedTouch(e, event);\n\n\t\tif (!touch) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Stop the interface from gesturing\n\t\te.preventDefault();\n\n\t\tevent.targetTouches = e.targetTouches;\n\t\te.data.touch = touch;\n\t\te.data.timeStamp = e.timeStamp;\n\t\ttimer.kick();\n\t}\n\n\tfunction activeTouchend(e) {\n\t\tvar event = e.data.event,\n\t\t    timer = e.data.timer,\n\t\t    touch = identifiedTouch(e.changedTouches, event.identifier);\n\n\t\t// This isn't the touch you're looking for.\n\t\tif (!touch) {\n\t\t\treturn;\n\t\t}\n\n\t\tremoveActiveTouch(event);\n\t\tendEvent(event, timer);\n\t}\n\n\tfunction removeActiveTouch(event) {\n\t\tremove(document, '.' + event.identifier, activeTouchmove);\n\t\tremove(document, '.' + event.identifier, activeTouchend);\n\t}\n\n\t// Logic for triggering move and moveend events\n\n\tfunction updateEvent(event, touch, timeStamp, timer) {\n\t\tvar time = timeStamp - event.timeStamp;\n\n\t\tevent.type = 'move';\n\t\tevent.distX = touch.pageX - event.startX;\n\t\tevent.distY = touch.pageY - event.startY;\n\t\tevent.deltaX = touch.pageX - event.pageX;\n\t\tevent.deltaY = touch.pageY - event.pageY;\n\n\t\t// Average the velocity of the last few events using a decay\n\t\t// curve to even out spurious jumps in values.\n\t\tevent.velocityX = 0.3 * event.velocityX + 0.7 * event.deltaX / time;\n\t\tevent.velocityY = 0.3 * event.velocityY + 0.7 * event.deltaY / time;\n\t\tevent.pageX = touch.pageX;\n\t\tevent.pageY = touch.pageY;\n\t}\n\n\tfunction endEvent(event, timer, fn) {\n\t\ttimer.end(function () {\n\t\t\tevent.type = 'moveend';\n\n\t\t\ttrigger(event.target, event);\n\n\t\t\treturn fn && fn();\n\t\t});\n\t}\n\n\t// jQuery special event definition\n\n\tfunction setup(data, namespaces, eventHandle) {\n\t\t// Stop the node from being dragged\n\t\t//add(this, 'dragstart.move drag.move', preventDefault);\n\n\t\t// Prevent text selection and touch interface scrolling\n\t\t//add(this, 'mousedown.move', preventIgnoreTags);\n\n\t\t// Tell movestart default handler that we've handled this\n\t\tadd(this, 'movestart.move', flagAsHandled);\n\n\t\t// Don't bind to the DOM. For speed.\n\t\treturn true;\n\t}\n\n\tfunction teardown(namespaces) {\n\t\tremove(this, 'dragstart drag', preventDefault);\n\t\tremove(this, 'mousedown touchstart', preventIgnoreTags);\n\t\tremove(this, 'movestart', flagAsHandled);\n\n\t\t// Don't bind to the DOM. For speed.\n\t\treturn true;\n\t}\n\n\tfunction addMethod(handleObj) {\n\t\t// We're not interested in preventing defaults for handlers that\n\t\t// come from internal move or moveend bindings\n\t\tif (handleObj.namespace === \"move\" || handleObj.namespace === \"moveend\") {\n\t\t\treturn;\n\t\t}\n\n\t\t// Stop the node from being dragged\n\t\tadd(this, 'dragstart.' + handleObj.guid + ' drag.' + handleObj.guid, preventDefault, undefined, handleObj.selector);\n\n\t\t// Prevent text selection and touch interface scrolling\n\t\tadd(this, 'mousedown.' + handleObj.guid, preventIgnoreTags, undefined, handleObj.selector);\n\t}\n\n\tfunction removeMethod(handleObj) {\n\t\tif (handleObj.namespace === \"move\" || handleObj.namespace === \"moveend\") {\n\t\t\treturn;\n\t\t}\n\n\t\tremove(this, 'dragstart.' + handleObj.guid + ' drag.' + handleObj.guid);\n\t\tremove(this, 'mousedown.' + handleObj.guid);\n\t}\n\n\tjQuery.event.special.movestart = {\n\t\tsetup: setup,\n\t\tteardown: teardown,\n\t\tadd: addMethod,\n\t\tremove: removeMethod,\n\n\t\t_default: function _default(e) {\n\t\t\tvar event, data;\n\n\t\t\t// If no move events were bound to any ancestors of this\n\t\t\t// target, high tail it out of here.\n\t\t\tif (!e._handled()) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfunction update(time) {\n\t\t\t\tupdateEvent(event, data.touch, data.timeStamp);\n\t\t\t\ttrigger(e.target, event);\n\t\t\t}\n\n\t\t\tevent = {\n\t\t\t\ttarget: e.target,\n\t\t\t\tstartX: e.startX,\n\t\t\t\tstartY: e.startY,\n\t\t\t\tpageX: e.pageX,\n\t\t\t\tpageY: e.pageY,\n\t\t\t\tdistX: e.distX,\n\t\t\t\tdistY: e.distY,\n\t\t\t\tdeltaX: e.deltaX,\n\t\t\t\tdeltaY: e.deltaY,\n\t\t\t\tvelocityX: e.velocityX,\n\t\t\t\tvelocityY: e.velocityY,\n\t\t\t\ttimeStamp: e.timeStamp,\n\t\t\t\tidentifier: e.identifier,\n\t\t\t\ttargetTouches: e.targetTouches,\n\t\t\t\tfinger: e.finger\n\t\t\t};\n\n\t\t\tdata = {\n\t\t\t\tevent: event,\n\t\t\t\ttimer: new Timer(update),\n\t\t\t\ttouch: undefined,\n\t\t\t\ttimeStamp: undefined\n\t\t\t};\n\n\t\t\tif (e.identifier === undefined) {\n\t\t\t\t// We're dealing with a mouse\n\t\t\t\t// Stop clicks from propagating during a move\n\t\t\t\tadd(e.target, 'click', returnFalse);\n\t\t\t\tadd(document, mouseevents.move, activeMousemove, data);\n\t\t\t\tadd(document, mouseevents.end, activeMouseend, data);\n\t\t\t} else {\n\t\t\t\t// We're dealing with a touch. Stop touchmove doing\n\t\t\t\t// anything defaulty.\n\t\t\t\te._preventTouchmoveDefault();\n\t\t\t\tadd(document, touchevents.move + '.' + e.identifier, activeTouchmove, data);\n\t\t\t\tadd(document, touchevents.end + '.' + e.identifier, activeTouchend, data);\n\t\t\t}\n\t\t}\n\t};\n\n\tjQuery.event.special.move = {\n\t\tsetup: function setup() {\n\t\t\t// Bind a noop to movestart. Why? It's the movestart\n\t\t\t// setup that decides whether other move events are fired.\n\t\t\tadd(this, 'movestart.move', jQuery.noop);\n\t\t},\n\n\t\tteardown: function teardown() {\n\t\t\tremove(this, 'movestart.move', jQuery.noop);\n\t\t}\n\t};\n\n\tjQuery.event.special.moveend = {\n\t\tsetup: function setup() {\n\t\t\t// Bind a noop to movestart. Why? It's the movestart\n\t\t\t// setup that decides whether other move events are fired.\n\t\t\tadd(this, 'movestart.moveend', jQuery.noop);\n\t\t},\n\n\t\tteardown: function teardown() {\n\t\t\tremove(this, 'movestart.moveend', jQuery.noop);\n\t\t}\n\t};\n\n\tadd(document, 'mousedown.move', mousedown);\n\tadd(document, 'touchstart.move', touchstart);\n\n\t// Make jQuery copy touch event properties over to the jQuery event\n\t// object, if they are not already listed. But only do the ones we\n\t// really need. IE7/8 do not have Array#indexOf(), but nor do they\n\t// have touch events, so let's assume we can ignore them.\n\tif (typeof Array.prototype.indexOf === 'function') {\n\t\t(function (jQuery, undefined) {\n\t\t\tvar props = [\"changedTouches\", \"targetTouches\"],\n\t\t\t    l = props.length;\n\n\t\t\twhile (l--) {\n\t\t\t\tif (jQuery.event.props.indexOf(props[l]) === -1) {\n\t\t\t\t\tjQuery.event.props.push(props[l]);\n\t\t\t\t}\n\t\t\t}\n\t\t})(jQuery);\n\t};\n});\n'use strict';\n\n// jQuery.event.swipe\n// 0.5\n// Stephen Band\n\n// Dependencies\n// jQuery.event.move 1.2\n\n// One of swipeleft, swiperight, swipeup or swipedown is triggered on\n// moveend, when the move has covered a threshold ratio of the dimension\n// of the target node, or has gone really fast. Threshold and velocity\n// sensitivity changed with:\n//\n// jQuery.event.special.swipe.settings.threshold\n// jQuery.event.special.swipe.settings.sensitivity\n\n(function (thisModule) {\n\tif (typeof define === 'function' && define.amd) {\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine(['jquery', undefined, 'jquery.event.move'], thisModule);\n\t} else if (typeof module !== \"undefined\" && module !== null && module.exports) {\n\t\tmodule.exports = thisModule;\n\t} else {\n\t\t// Browser globals\n\t\tthisModule(jQuery);\n\t}\n})(function (jQuery, undefined) {\n\tvar add = jQuery.event.add,\n\t    remove = jQuery.event.remove,\n\n\n\t// Just sugar, so we can have arguments in the same order as\n\t// add and remove.\n\ttrigger = function trigger(node, type, data) {\n\t\tjQuery.event.trigger(type, data, node);\n\t},\n\t    settings = {\n\t\t// Ratio of distance over target finger must travel to be\n\t\t// considered a swipe.\n\t\tthreshold: 0.4,\n\t\t// Faster fingers can travel shorter distances to be considered\n\t\t// swipes. 'sensitivity' controls how much. Bigger is shorter.\n\t\tsensitivity: 6\n\t};\n\n\tfunction moveend(e) {\n\t\tvar w, h, event;\n\n\t\tw = e.currentTarget.offsetWidth;\n\t\th = e.currentTarget.offsetHeight;\n\n\t\t// Copy over some useful properties from the move event\n\t\tevent = {\n\t\t\tdistX: e.distX,\n\t\t\tdistY: e.distY,\n\t\t\tvelocityX: e.velocityX,\n\t\t\tvelocityY: e.velocityY,\n\t\t\tfinger: e.finger\n\t\t};\n\n\t\t// Find out which of the four directions was swiped\n\t\tif (e.distX > e.distY) {\n\t\t\tif (e.distX > -e.distY) {\n\t\t\t\tif (e.distX / w > settings.threshold || e.velocityX * e.distX / w * settings.sensitivity > 1) {\n\t\t\t\t\tevent.type = 'swiperight';\n\t\t\t\t\ttrigger(e.currentTarget, event);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (-e.distY / h > settings.threshold || e.velocityY * e.distY / w * settings.sensitivity > 1) {\n\t\t\t\t\tevent.type = 'swipeup';\n\t\t\t\t\ttrigger(e.currentTarget, event);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (e.distX > -e.distY) {\n\t\t\t\tif (e.distY / h > settings.threshold || e.velocityY * e.distY / w * settings.sensitivity > 1) {\n\t\t\t\t\tevent.type = 'swipedown';\n\t\t\t\t\ttrigger(e.currentTarget, event);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (-e.distX / w > settings.threshold || e.velocityX * e.distX / w * settings.sensitivity > 1) {\n\t\t\t\t\tevent.type = 'swipeleft';\n\t\t\t\t\ttrigger(e.currentTarget, event);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction getData(node) {\n\t\tvar data = jQuery.data(node, 'event_swipe');\n\n\t\tif (!data) {\n\t\t\tdata = { count: 0 };\n\t\t\tjQuery.data(node, 'event_swipe', data);\n\t\t}\n\n\t\treturn data;\n\t}\n\n\tjQuery.event.special.swipe = jQuery.event.special.swipeleft = jQuery.event.special.swiperight = jQuery.event.special.swipeup = jQuery.event.special.swipedown = {\n\t\tsetup: function setup(data, namespaces, eventHandle) {\n\t\t\tvar data = getData(this);\n\n\t\t\t// If another swipe event is already setup, don't setup again.\n\t\t\tif (data.count++ > 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tadd(this, 'moveend', moveend);\n\n\t\t\treturn true;\n\t\t},\n\n\t\tteardown: function teardown() {\n\t\t\tvar data = getData(this);\n\n\t\t\t// If another swipe event is still setup, don't teardown.\n\t\t\tif (--data.count > 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tremove(this, 'moveend', moveend);\n\n\t\t\treturn true;\n\t\t},\n\n\t\tsettings: settings\n\t};\n});\n'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n;(function ($, window, document, undefined) {\n    'use strict';\n\n    // Create the defaults once\n\n    var pluginName = 'sxMediaGallery';\n    var pluginPrefix = 'sxmg';\n\n    var FileType = {\n        File: 'file',\n        Image: 'image',\n        Video: 'video',\n        Audio: 'audio',\n        PDF: 'pdf',\n        Excel: 'excel',\n        Word: 'word',\n        PowerPoint: 'powerpoint',\n        Text: 'text',\n        ZIP: 'zip'\n    };\n\n    var IconCollection = {\n        Close: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABYElEQVRYR7WX7RHCIAyG46Y6gTqJOoGu6AR6L3fhUkrIB5Rfnm3zPAUS0hPtx5mI3kT0JKJ753rmrwcRIS7ifWSAUxON4fw3br5kiOIZvAzi8kC8KiEFWvgKiRa+k2ABDT4jocE3EhCw4BkJC14lIPALrLFnT3jhBRuZAc9MhODY4N490E5SbybCcGSDJwu0FZISKTgvgQR4N6RcDvyWeW5tKbUO8INRCQsor2/gvRk4UmIHHwnwtGJtV4wu3BJYJaHCPQKzEkO4VyArgaMXR/pwtMexdnM0zxHHU7ZLKbZGBi7rxLCfsARm4C6JkcAKuCmhCayEDyV6AkfAVYlWIArnDRapmJvskAIZOHe30QOsSrDADDx7gBUJCKBaXa1iIK6Pymt0Jl7RptSs7YEuG+/0jTSlHnh0OdxNaQTulSgxPU1pBm5J1JjWx+kMXJNwNaXIjFv7KR3IlPZWZEc35h/4CGLAjclibQAAAABJRU5ErkJggg==',\n        Menu: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAARUlEQVRYR+3U0QkAIAgFQN1/6IL6aQIVOhd4cujLaJ5szg8LEHgFVvFBnmwLEBglUPwEN25UEekBAgT0gBsgQEAP/CmwAdmEEiEL49BKAAAAAElFTkSuQmCC',\n        Download: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABqklEQVRYR+2X7U3DMBCG327ACDABMAEwATABMAGMABNAJ4BOQDcAJqBswAbQCUBPdFeFJK4/4qp/OKlKFdn3Pr4725eJtmyTLevrH6BWBC4knUk6lrQj6VvSq6SpPYOZTgXA+amkXUmfku7seSDpURLPkAFyblC9MSkACFx2ZrLCW/ux4pgtJJ0MQcQAEAaghs0tEn98xQAI31ENdfNxKIlorCwG8GVFVYuBorwJAZDLa8s3xbYJe7Od0osAVfxsVb4JYfdJ8T7Y9uR/cxKy8pfIVqoNhTi7YgEAObmvrZDgD4g9AN4LV98t4J8E0e6QKU5KJnr62g5L/DQpKJlYC6ApQg6G/YLw1UjBEielx20NgJk7KYnCWIAlxe9OOAs499el4knSVWKqYlFFnDHz7ip4ybkQAkmBWCeOMLciVzl9RXJPiDBdD7YOoi0+G+gjegGM3YbtCTGIbPGcCDhICKJIvATAU9BOB1esd01JYQ/1A4kFvqoDh/B52eKlEWBed9t+WKPR3PE5llOEXb8OwXu+B7LFx0TAYbwlLxKvAZAT7cGxY1IwWhwHv/0QUz8k+/1lAAAAAElFTkSuQmCC',\n        Profile: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABIklEQVRYR+2XYQ3CMBSEbwrAAeAAJyABB+AAcAAOkIAUJIADHEBudMvWjLzjNR1Zsv4hjJf3vh3XS1vgs04AVgDm4XuujzuAC4BjNaAIw7e5Jn7pS4ADfyPAE8CkZwAqsagAXj0Pb6pfKhAD8FmO1TlnUABTAHsA6yBPy82CZMkKcKvGu+UMYCcMZ0kyQNduqd0sQGQBePwQXskADA56oLnqQOlDgSqymyYs00xcbgWWkfvjedeQ7TcDxA1Ao82M5ooZ3QBqVFsJOlwA0WNmmVsBs7NY4AZQPRBzxJ4YLoCosFnmVsDsLBa4AUYPiAqbZe6/wOwsFowAsgKiosllZVL+62pWnyUJ0HXWS349o0HrcspaQmyEk08qGN+cF5r6LPkGr15XIUxe5/QAAAAASUVORK5CYII=',\n        ArrowLeft: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAu0lEQVRYR82XYQ6AIAhG8abdrI7abHMzBoIyP+x38B4sCQslPyXIv4joieSICFT4TUSRHMvBDV6Lhwv0cLgAh0MFJDhMQINDBEbw7QIWfKuABx6ZQV+sdoYhcE0ABpcEoHAuAIf3AinwowSqTEoX+DGES0hzACpx5CBq4xXSCWud8khYOYb/C0+wJeHJoUp4g1MXEuub8BYhdmE2OHUp1ToxW8SvE6vBqRcT3onVIoYrmXfXS72ceiWH772wrR4VW0r/CgAAAABJRU5ErkJggg==',\n        ArrowRight: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAq0lEQVRYR8XXAQqAIAyF4XnTulmdtFiQIGZuc2/zAP4fgg4LJa/i0D+IaLPu4wG4iIgRuwXhBeC2CeEJMCG8AWoEAqBCoABiBBIgQqABUwQD+B6j1/CKRgGGJxEJ+EREAzpEBqBBZAEqIhNw8hjPAjxxPoYMQI1nAJp4NKCLRwI+4y9gdQ7MZskwHgH4jaMB0zgSIIqjAOI4AqCKewPUcU+AKe4FSP+cLj1kN48NOiE+oolLAAAAAElFTkSuQmCC'\n    };\n\n    var extendDefaults = function extendDefaults(source, properties) {\n        var property;\n        for (property in properties) {\n            if (properties.hasOwnProperty(property)) {\n                source[property] = properties[property];\n            }\n        }\n        return source;\n    };\n\n    var SXMediaMaterial = function () {\n        function SXMediaMaterial(obj) {\n            _classCallCheck(this, SXMediaMaterial);\n\n            this.id = '';\n            this.url = '';\n            this.thumbnail = '';\n            this.type = '';\n            this.title = '';\n            this.comment = '';\n            this.date = null;\n\n            if (obj && (typeof obj === 'undefined' ? 'undefined' : _typeof(obj)) == 'object') extendDefaults(this, obj);\n\n            if (this.date) this.date = new Date(this.date);\n\n            if (this.type == null || this.type == undefined || this.type == '') this.type = SXMediaMaterial.defineFileType(this.url);\n\n            if (this.type == FileType.Image && (!this.thumbnail || this.thumbnail == '')) this.thumbnail = this.url;\n        }\n\n        _createClass(SXMediaMaterial, [{\n            key: 'toString',\n            value: function toString() {\n                return this.url;\n            }\n        }, {\n            key: 'hasInfoToDisplay',\n            get: function get() {\n                return this.dateString || this.title || this.comment;\n            }\n        }, {\n            key: 'dateString',\n            get: function get() {\n                if (this.date == null || this.date == undefined || !(this.date instanceof Date)) return '';\n\n                var year = this.date.getFullYear();\n                var month = this.date.getMonth() + 1;\n                if (month < 10) month = \"0\" + month.toString();\n                var day = this.date.getDate();\n\n                return day + '.' + month + '.' + year;\n            }\n        }], [{\n            key: 'defineFileType',\n            value: function defineFileType(filename) {\n                if (!filename || typeof filename != 'string' || filename == '') return FileType.File;\n\n                var extenstion = filename.substring(filename.lastIndexOf('.') + 1);\n                switch (extenstion) {\n                    case \"jpeg\":\n                    case \"jpg\":\n                    case \"bmp\":\n                    case \"png\":\n                    case \"gif\":\n                    case \"tiff\":\n                        return FileType.Image;\n\n                    case \"avi\":\n                    case \"mpeg\":\n                    case \"mp4\":\n                    case \"wmv\":\n                    case \"mov\":\n                        return FileType.Video;\n\n                    case \"mp3\":\n                    case \"wav\":\n                    case \"wma\":\n                        return FileType.Audio;\n\n                    case \"pdf\":\n                        return FileType.PDF;\n\n                    case \"doc\":\n                    case \"docx\":\n                    case \"dotx\":\n                        return FileType.Word;\n\n                    case \"xls\":\n                    case \"xlsx\":\n                        return FileType.Excel;\n\n                    case \"ppt\":\n                    case \"pptx\":\n                        return FileType.PowerPoint;\n\n                    case \"txt\":\n                        return FileType.Text;\n\n                    case \"zip\":\n                    case \"7z\":\n                    case \"rar\":\n                        return FileType.ZIP;\n\n                    default:\n                        return FileType.File;\n                }\n            }\n        }]);\n\n        return SXMediaMaterial;\n    }();\n\n    var SXMediaGalleryViewer = function () {\n        function SXMediaGalleryViewer(options) {\n            _classCallCheck(this, SXMediaGalleryViewer);\n\n            this._defaults = { width: 1, height: 1, infoVisible: true };\n            this._options = extendDefaults(this._defaults, options);\n            this._prefix = pluginPrefix + \"-viewer\";\n\n            this._element = $('<div class=\\'' + this._prefix + ' unselectable\\'></div>');\n\n            this._info = new SXMediaGalleryViewerInfo({ visible: this._options.infoVisible });\n            this.element.append(this.info.element);\n        }\n\n        _createClass(SXMediaGalleryViewer, [{\n            key: 'displayMaterial',\n\n\n            // display GalleryViewer content\n            value: function displayMaterial(material) {\n                var prefix = this._prefix;\n\n                if (this.element == null) throw new Error('GalleryView DOM element is destroyed!');\n\n                if (material != undefined) this.material = material;\n\n                this.clear();\n\n                if (this.material == null) return;\n\n                //define different material types content\n                if (this.material.type.toLowerCase() == FileType.Image.toLowerCase()) {\n                    this._content = $('<img src=' + this.material.url + ' class=\\'' + prefix + '-content ' + prefix + '-content-image\\'>');\n                    this._content.css('visibility', 'hidden');\n\n                    this._content.load(function (event) {\n                        this._contentOriginalWidth = event.target.width;\n                        this._contentOriginalHeight = event.target.height;\n                        this.resize();\n                        this._content.css('visibility', 'visible');\n                    }.bind(this));\n                } else {\n                    this._contentOriginalWidth = 640;\n                    this._contentOriginalHeight = 480;\n\n                    if (this.material.type.toLowerCase() == FileType.Video.toLowerCase()) {\n                        this._content = $('<video class=\\'' + prefix + '-content ' + prefix + '-content-video\\' controls=\"controls\"><source src=\"' + this.material.url + '\"></video>');\n                    } else if (this.material.type.toLowerCase() == FileType.PDF.toLowerCase()) {\n                        this._content = $('<div class=\\'' + prefix + '-content\\'></div>');\n                    } else {\n                        this._content = $('<div class=\\'' + prefix + '-content\\'><h2>No data to display</h2></div>');\n                        //this._content = $(`<div class='${prefix}-content'><a class=\"media\" href=\"${this.material.url}\"></a></div>`);\n                    }\n                }\n\n                if (this.content) {\n                    this.element.append(this.content);\n                    this.resize();\n                    //this.content.find('.media').media();\n                    if (this.material.type.toLowerCase() == FileType.PDF.toLowerCase()) PDFObject.embed(this.material.url, this._content);\n                }\n\n                if (this.info != null) this.info.displayMaterial(material);\n            }\n\n            // clear GalleryViewer content\n\n        }, {\n            key: 'clear',\n            value: function clear() {\n                if (this.content != null) this.content.remove();\n\n                this._content = null;\n                this._contentOriginalWidth = 0;\n                this._contentOriginalHeight = 0;\n\n                if (this.info != null) this.info.displayMaterial(null);\n            }\n\n            // resize Image by current view sizes\n\n        }, {\n            key: 'resize',\n            value: function resize(width, height, margins) {\n                if (width == undefined) width = this._options.width;\n                if (height == undefined) height = this._options.height;\n                if (margins == undefined) margins = this._options.margins;\n\n                this._options.width = width;\n                this._options.height = height;\n                this._options.margins = margins;\n\n                if (this.element == null || this.material == null) return;\n\n                if (this.content == null || this._contentOriginalWidth <= 0 || this._contentOriginalHeight <= 0) return;\n\n                var marginTop = this._options.margins ? this._options.margins.top || 0 : 0;\n                var marginBottom = this._options.margins ? this._options.margins.bottom || 0 : 0;\n                if (this.info != null && this.info.isVisible) marginBottom += this.info.element.innerHeight();\n\n                // we'd like to have no interception with info block\n                if (this.material.type.toLowerCase() == FileType.Image.toLowerCase()) {\n                    marginTop = 0;\n                    marginBottom = 0;\n                }\n\n                var coefficient = Math.min(width / this._contentOriginalWidth, (height - marginTop - marginBottom) / this._contentOriginalHeight);\n\n                var css = {\n                    width: this._contentOriginalWidth * coefficient,\n                    height: this._contentOriginalHeight * coefficient,\n                    'margin-top': marginTop + 'px',\n                    'margin-bottom': marginBottom + 'px'\n                };\n\n                //this._content.find('embed').css({height: 'auto'});\n                this._content.css(css);\n            }\n\n            // download current Material\n\n        }, {\n            key: 'download',\n            value: function download() {\n                if (this.material == null || this.element == null) return;\n\n                var elementDOM = this.element[0];\n                var url = this.material.url;\n                var filename = this.material.filename || url.substring(url.lastIndexOf(\"/\") + 1).split(\"?\")[0];\n\n                var xhr = new XMLHttpRequest();\n                xhr.responseType = 'blob';\n                xhr.onload = function () {\n                    var a = document.createElement('a');\n                    a.href = window.URL.createObjectURL(xhr.response); // xhr.response is a blob\n                    a.download = filename; // Set the file name.\n                    a.style.display = 'none';\n                    elementDOM.appendChild(a);\n                    a.click();\n                    elementDOM.removeChild(a);\n                };\n                xhr.open('GET', url, true);\n                xhr.send();\n            }\n\n            // create GalleryViewer by Material and Options\n\n        }, {\n            key: 'element',\n            get: function get() {\n                return this._element == undefined ? null : this._element;\n            }\n        }, {\n            key: 'info',\n            get: function get() {\n                return this._info == undefined ? null : this._info;\n            }\n        }, {\n            key: 'content',\n            get: function get() {\n                return this._content == undefined ? null : this._content;\n            }\n\n            // get current material\n\n        }, {\n            key: 'material',\n            get: function get() {\n                return this._material == undefined ? null : this._material;\n            }\n\n            // set current material\n            ,\n            set: function set(obj) {\n                this.clear();\n\n                if (obj == null || obj == undefined) this._material = null;else if (obj instanceof SXMediaMaterial) this._material = obj;else if ((typeof obj === 'undefined' ? 'undefined' : _typeof(obj)) == 'object') this._material = new SXMediaMaterial(obj);else throw new Error(\"Invalid Material object specified!\");\n            }\n        }], [{\n            key: 'create',\n            value: function create(width, height, margins, options, material) {\n                var result = new SXMediaGalleryViewer({\n                    width: width,\n                    height: height,\n                    margins: margins\n                });\n\n                if (material != undefined) result.displayMaterial(material);\n\n                return result;\n            }\n        }]);\n\n        return SXMediaGalleryViewer;\n    }();\n\n    var SXMediaGalleryViewerInfo = function () {\n        function SXMediaGalleryViewerInfo(options) {\n            _classCallCheck(this, SXMediaGalleryViewerInfo);\n\n            this._defaults = { visible: true };\n            this._options = extendDefaults(this._defaults, options);\n            this._prefix = pluginPrefix + \"-viewer-info\";\n\n            this._element = $('<div class=\\'' + this._prefix + '\\'></div>');\n\n            this._date = $('<span class=\\'' + this._prefix + '-date\\'></span>');\n            this._title = $('<span class=\\'' + this._prefix + '-title\\'></span>');\n\n            this._header = $('<h1 class=\\'' + this._prefix + '-header\\'></h1>');\n            this._header.append(this._date);\n            this._header.append(this._title);\n            this._element.append(this._header);\n\n            this._comment = $('<div class=\\'' + this._prefix + '-comment\\'></div>');\n            this._element.append(this._comment);\n\n            this.display(this._options.visible);\n        }\n\n        _createClass(SXMediaGalleryViewerInfo, [{\n            key: 'display',\n            value: function display(visible) {\n                if (this.element == null) throw new Error('Viewer Info DOM element was destroyed!');\n\n                if (visible == undefined || visible) {\n                    this._isVisible = true;\n                    this.element.show();\n                } else {\n                    this._isVisible = false;\n                    this.element.hide();\n                }\n\n                this.element.trigger(pluginPrefix + '-InfoDisplayChanged', { visible: this.isVisible });\n            }\n        }, {\n            key: 'show',\n            value: function show() {\n                this.display(true);\n            }\n        }, {\n            key: 'hide',\n            value: function hide() {\n                this.display(false);\n            }\n        }, {\n            key: 'toggle',\n            value: function toggle() {\n                this.display(!this.isVisible);\n            }\n\n            // display GalleryViewer content\n\n        }, {\n            key: 'displayMaterial',\n            value: function displayMaterial(material) {\n                this._date.text(material ? material.dateString + ' ' : '');\n                this._title.text(material ? material.title || '' : '');\n                this._comment.text(material ? material.comment || '' : '');\n            }\n        }, {\n            key: 'element',\n            get: function get() {\n                return this._element == undefined ? null : this._element;\n            }\n        }, {\n            key: 'isVisible',\n            get: function get() {\n                return this._isVisible;\n            }\n        }]);\n\n        return SXMediaGalleryViewerInfo;\n    }();\n\n    var SXMediaGalleryButton = function () {\n        function SXMediaGalleryButton(options) {\n            _classCallCheck(this, SXMediaGalleryButton);\n\n            this._defaults = { type: 'button', name: 'name', src: '', handler: null };\n            this._options = extendDefaults(this._defaults, options);\n            this._prefix = pluginPrefix + \"-\" + this.type;\n\n            this._element = $('<a class=\\'' + this._prefix + ' ' + this._prefix + '-' + this.name + ' unselectable\\'><img ' + (this._options.src ? 'src=\\'' + this._options.src + '\\'' : '') + '></a>');\n\n            if (this.handler != null) this.element.click(this.handler);\n        }\n\n        _createClass(SXMediaGalleryButton, [{\n            key: 'changeState',\n            value: function changeState(isActive) {\n                if (this.element == null) return;\n\n                if (isActive) this.element.addClass('active');else this.element.removeClass('active');\n            }\n        }, {\n            key: 'element',\n            get: function get() {\n                return this._element == undefined ? null : this._element;\n            }\n        }, {\n            key: 'type',\n            get: function get() {\n                return this._options.type;\n            }\n        }, {\n            key: 'name',\n            get: function get() {\n                return this._options.name;\n            }\n        }, {\n            key: 'handler',\n            get: function get() {\n                return this._options.handler == undefined ? null : this._options.handler;\n            }\n        }], [{\n            key: 'create',\n            value: function create(type, name, src, handler) {\n                return new SXMediaGalleryButton({ type: type, name: name, src: src, handler: handler });\n            }\n        }]);\n\n        return SXMediaGalleryButton;\n    }();\n\n    var SXMediaGalleryMenu = function () {\n        function SXMediaGalleryMenu(options) {\n            _classCallCheck(this, SXMediaGalleryMenu);\n\n            this._defaults = {};\n            this._options = extendDefaults(this._defaults, options);\n            this._prefix = pluginPrefix + \"-menu\";\n\n            this._element = $('<div class=\\'' + this._prefix + '\\'></div>');\n\n            this._buttons = [];\n        }\n\n        _createClass(SXMediaGalleryMenu, [{\n            key: 'addButton',\n            value: function addButton(button) {\n                if (button == undefined || button == null || !(button instanceof SXMediaGalleryButton)) throw new Error('Wrong Button specified!');\n\n                if (this.element == null) throw new Error('Menu DOM element was destroyed!');\n\n                if (button.element == null) throw new Error(\"Button DOM element was destroyed!\");\n\n                this.buttons.push(button);\n\n                this.element.append(button.element);\n            }\n        }, {\n            key: 'findButton',\n            value: function findButton(name) {\n                if (this.buttons != null) for (var i = 0; i < this.buttons.length; i++) {\n                    if (this.buttons[i].name.toLowerCase() == name.toLowerCase()) return this.buttons[i];\n                }return null;\n            }\n        }, {\n            key: 'changeButtonState',\n            value: function changeButtonState(name, isActive) {\n                var button = this.findButton(name);\n                if (button != null) button.changeState(isActive);\n            }\n        }, {\n            key: 'element',\n            get: function get() {\n                return this._element == undefined ? null : this._element;\n            }\n        }, {\n            key: 'buttons',\n            get: function get() {\n                if (this._buttons == undefined || this._buttons == null || !(this._buttons instanceof Array)) this._buttons = [];\n                return this._buttons;\n            }\n        }]);\n\n        return SXMediaGalleryMenu;\n    }();\n\n    var SXMediaGalleryDesk = function () {\n        function SXMediaGalleryDesk(options) {\n            _classCallCheck(this, SXMediaGalleryDesk);\n\n            this._defaults = {};\n            this._options = extendDefaults(this._defaults, options);\n            this._prefix = pluginPrefix + \"-desk\";\n\n            this._element = $('<div class=\\'' + this._prefix + '\\'></div>').css('display', 'none');\n\n            this._isVisible = false;\n            this._materials = [];\n        }\n\n        _createClass(SXMediaGalleryDesk, [{\n            key: 'display',\n            value: function display(visible) {\n                if (visible == undefined || visible) {\n                    this._isVisible = true;\n                    this.element.show();\n                } else {\n                    this._isVisible = false;\n                    this.element.hide();\n                }\n\n                this.element.trigger(pluginPrefix + '-DeskDisplayChanged', { visible: this.isVisible });\n            }\n        }, {\n            key: 'show',\n            value: function show() {\n                this.display(true);\n            }\n        }, {\n            key: 'hide',\n            value: function hide() {\n                this.display(false);\n            }\n        }, {\n            key: 'toggle',\n            value: function toggle() {\n                this.display(!this.isVisible);\n            }\n        }, {\n            key: 'addMaterial',\n            value: function addMaterial(material, clickHandler) {\n                if (!material || !(material instanceof SXMediaMaterial)) throw new Error('Wrong Material specified!');\n\n                if (this.element == null) throw new Error('Desk DOM element was destroyed!');\n\n                this.materials.push(material);\n\n                var item = $('<div class=\\'' + this._prefix + '-item\\'></div>');\n\n                if (material.thumbnail) item.append($('<img class=\\'' + this._prefix + '-item-avatar\\' src=\\'' + material.thumbnail + '\\'>'));\n\n                if (clickHandler) item.click(clickHandler);\n\n                this.element.append(item);\n            }\n        }, {\n            key: 'element',\n            get: function get() {\n                return this._element == undefined ? null : this._element;\n            }\n        }, {\n            key: 'isVisible',\n            get: function get() {\n                return this._isVisible == undefined || this._isVisible == null ? false : this._isVisible;\n            }\n        }, {\n            key: 'materials',\n            get: function get() {\n                if (!this._materials || !(this._materials instanceof Array)) this._materials = [];\n                return this._materials;\n            }\n        }]);\n\n        return SXMediaGalleryDesk;\n    }();\n\n    var SXMediaGalleryPanel = function () {\n        function SXMediaGalleryPanel(options) {\n            _classCallCheck(this, SXMediaGalleryPanel);\n\n            jQuery.event.special.swipe.settings.threshold = 0.2;\n            //jQuery.event.special.swipe.settings.sensitivity = 1;\n\n            this._defaults = { infoVisible: true, allowDuplicates: false };\n            this._options = extendDefaults(this._defaults, options);\n            this._prefix = pluginPrefix + \"-panel\";\n\n            this._isVisible = false;\n            this._materials = [];\n\n            // create Panel element and handle events\n            this._element = $('<div class=\\'' + this._prefix + '\\'></div>').css('display', 'none');\n            //this.element.load(this.resize.bind(this));\n            this.element.click(function (event) {\n                event.stopPropagation();\n            });\n            this.element.on('swiperight', this.movePrevious.bind(this));\n            this.element.on('swipeleft', this.moveNext.bind(this));\n\n            // on Info display changed\n            this.element.on(pluginPrefix + '-InfoDisplayChanged', function (event, data) {\n                this.menu.changeButtonState('info', data.visible);\n            }.bind(this));\n\n            // on Desk display changed\n            this.element.on(pluginPrefix + '-DeskDisplayChanged', function (event, data) {\n                this.menu.changeButtonState('desk', data.visible);\n            }.bind(this));\n\n            // add arrows to move left & right\n            this.element.append(SXMediaGalleryButton.create('panel-arrow', 'left', IconCollection.ArrowLeft, this.movePrevious.bind(this)).element);\n            this.element.append(SXMediaGalleryButton.create('panel-arrow', 'right', IconCollection.ArrowRight, this.moveNext.bind(this)).element);\n\n            // create Viewer\n            this._viewer = SXMediaGalleryViewer.create(this.element.width(), this.element.height(), this.margins, this._options);\n            this.element.append(this.viewer.element);\n\n            // create Desk\n            this._desk = new SXMediaGalleryDesk();\n            this.element.append(this.desk.element);\n\n            // crete Menu and fill with buttons\n            this._menu = new SXMediaGalleryMenu();\n            this.menu.addButton(SXMediaGalleryButton.create('menu-button', 'desk', IconCollection.Menu, this.desk.toggle.bind(this.desk)));\n            this.menu.addButton(SXMediaGalleryButton.create('menu-button', 'info', IconCollection.Profile, this.viewer.info.toggle.bind(this.viewer.info)));\n            this.menu.addButton(SXMediaGalleryButton.create('menu-button', 'download', IconCollection.Download, this.viewer.download.bind(this.viewer)));\n            this.menu.addButton(SXMediaGalleryButton.create('menu-button', 'close', IconCollection.Close, this.close.bind(this)));\n            this.element.append(this.menu.element);\n\n            // highlight the info-button if needed\n            this.menu.changeButtonState('info', this.viewer.info.isVisible);\n        }\n\n        _createClass(SXMediaGalleryPanel, [{\n            key: 'display',\n            value: function display(visible) {\n                if (visible == undefined || visible) {\n                    this._isVisible = true;\n                    this.element.show();\n                    this.resize();\n                } else {\n                    this._isVisible = false;\n                    this.element.hide();\n                }\n            }\n        }, {\n            key: 'hide',\n            value: function hide() {\n                this.display(false);\n            }\n        }, {\n            key: 'show',\n            value: function show(material) {\n                if (material != undefined) this.displayMaterial(material);\n\n                this.display(true);\n            }\n\n            //close panel of Gallery or close Desk\n\n        }, {\n            key: 'close',\n            value: function close() {\n                if (this.desk != null && this.desk.isVisible) {\n                    this.desk.hide();\n                } else {\n                    if (this.viewer != null) this.viewer.clear();\n                    this.hide();\n                }\n            }\n\n            //add object(objects) to Materials Collection\n\n        }, {\n            key: 'addMaterial',\n            value: function addMaterial(obj) {\n                if (obj == null || obj == undefined) return;\n\n                if (obj instanceof SXMediaMaterial) {\n                    if (this.allowDuplicates || this.findMaterial(obj.id) == null) {\n                        this.materials.push(obj);\n                        this.desk.addMaterial(obj, function () {\n                            this.displayMaterial(obj);\n                            this.desk.hide();\n                        }.bind(this));\n                    }\n                } else if (obj instanceof Array) {\n                    for (var i = 0; i < obj.length; i++) {\n                        this.addMaterial(obj[i]);\n                    }\n                } else if ((typeof obj === 'undefined' ? 'undefined' : _typeof(obj)) == 'object') {\n                    this.addMaterial(new SXMediaMaterial(obj));\n                }\n            }\n\n            //find Material in Collection by id\n\n        }, {\n            key: 'findMaterial',\n            value: function findMaterial(id) {\n                if (id == null || id == undefined) return null;\n\n                for (var i = 0; i < this.count; i++) {\n                    //if (typeof id == 'string' && this.materials[i].id.toLowerCase() == id.toLowerCase())\n                    //    return this.materials[i];\n                    if (this.materials[i].id == id) return this.materials[i];\n                }\n\n                return null;\n            }\n        }, {\n            key: 'moveTo',\n            value: function moveTo(index) {\n                var count = this.count;\n                if (count <= 0) return;\n\n                if (index >= count) index = count - 1;\n                if (index < 0) index = 0;\n\n                this.displayMaterial(this.materials[index]);\n            }\n        }, {\n            key: 'moveNext',\n            value: function moveNext() {\n                this.moveTo(this.index + 1);\n            }\n        }, {\n            key: 'movePrevious',\n            value: function movePrevious() {\n                this.moveTo(this.index - 1);\n            }\n\n            //resize the Gallery\n\n        }, {\n            key: 'resize',\n            value: function resize() {\n                if (this.element != null && this.viewer != null) {\n                    this.viewer.resize(this.element.width(), this.element.height(), this.margins);\n                }\n            }\n\n            //display specific Material in panel\n\n        }, {\n            key: 'displayMaterial',\n            value: function displayMaterial(obj) {\n                var material = null;\n\n                if (obj == null || obj == undefined) material = null;else if (obj instanceof SXMediaMaterial) material = obj;else if ((typeof obj === 'undefined' ? 'undefined' : _typeof(obj)) == 'object') material = new SXMediaMaterial(obj);else //if (typeof obj == 'string')\n                    material = this.findMaterial(obj);\n                //else\n                //    throw new Error('Invalid Material specified!');\n\n                if (this.viewer != null) {\n                    this.viewer.displayMaterial(material);\n                }\n            }\n        }, {\n            key: 'element',\n            get: function get() {\n                return this._element == undefined ? null : this._element;\n            }\n        }, {\n            key: 'isVisible',\n            get: function get() {\n                return this._isVisible == undefined || this._isVisible == null ? false : this._isVisible;\n            }\n        }, {\n            key: 'allowDuplicates',\n            get: function get() {\n                return !!this._options.allowDuplicates;\n            }\n        }, {\n            key: 'menu',\n            get: function get() {\n                return this._menu == undefined ? null : this._menu;\n            }\n        }, {\n            key: 'viewer',\n            get: function get() {\n                return this._viewer == undefined ? null : this._viewer;\n            }\n        }, {\n            key: 'desk',\n            get: function get() {\n                return this._desk == undefined ? null : this._desk;\n            }\n        }, {\n            key: 'materials',\n            get: function get() {\n                if (this._materials == undefined || this._materials == null || !(this._materials instanceof Array)) this._materials = [];\n\n                return this._materials;\n            }\n\n            //get Count of Materials in Collection\n\n        }, {\n            key: 'count',\n            get: function get() {\n                return this.materials.length;\n            }\n\n            //get current Material object\n\n        }, {\n            key: 'material',\n            get: function get() {\n                return this.viewer == null ? null : this.viewer.material;\n            }\n\n            //get index of current Material in Materials Collection\n\n        }, {\n            key: 'index',\n            get: function get() {\n                if (this.materials == null || this.material == null) return -1;\n                return this.materials.indexOf(this.material);\n            }\n        }, {\n            key: 'margins',\n            get: function get() {\n                // top margin with menu\n                var top = this.menu && this.menu.element ? this.menu.element.innerHeight() : 0;\n\n                return {\n                    top: top,\n                    right: 0,\n                    bottom: 0,\n                    left: 0\n                };\n            }\n        }]);\n\n        return SXMediaGalleryPanel;\n    }();\n\n    var SXMediaGallery = function () {\n        function SXMediaGallery(element, options) {\n            _classCallCheck(this, SXMediaGallery);\n\n            this._defaults = { infoVisible: true, allowDuplicates: false };\n            this._options = $.extend({}, this._defaults, options);\n            this._prefix = pluginPrefix;\n\n            this._element = $(element);\n\n            this._panel = new SXMediaGalleryPanel(this._options);\n\n            // добавляем новую панель к документу\n            $(\"body\").append(this.panel.element);\n\n            // обновляем размеры панели и просмотрщика,\n            // так как объекты были добавлены в DOM\n            $(window).load(this.panel.resize.bind(this.panel));\n\n            // при нажатии на документ вне панели - нужно закрыть панель\n            $(document).click(this.panel.close.bind(this.panel));\n\n            // on Window resize we should resize our Gallery\n            $(window).resize(this.panel.resize.bind(this.panel));\n\n            // при нажатии на элемент нужно отобразить панель с этим элементом\n            $(element).on('click', '.' + this._prefix + '-item', function (event) {\n                this.panel.show($(event.target).data('id'));\n                event.stopPropagation();\n            }.bind(this));\n\n            //добавляем все HTML элементы в коллекцию материалов\n            this.reload(this._options.items);\n        }\n\n        _createClass(SXMediaGallery, [{\n            key: 'reload',\n            value: function reload(materials) {\n                if (this.panel == null) return;\n\n                if (materials == undefined) {\n                    //добавляем все HTML элементы в коллекцию материалов\n                    this.element.find('.' + this._prefix + '-item').each(function (index, element) {\n                        var id = $(element).data('id');\n                        var type = $(element).data('type');\n                        var url = $(element).data('url');\n                        var thumbnail = $(element).data('thumbnail');\n                        var date = $(element).data('date');\n                        var title = $(element).data('title');\n                        var comment = $(element).data('comment');\n                        this.panel.addMaterial(new SXMediaMaterial({\n                            id: id,\n                            type: type,\n                            url: url,\n                            thumbnail: thumbnail,\n                            date: date,\n                            title: title,\n                            comment: comment\n                        }));\n                    }.bind(this));\n                } else {\n                    this.panel.addMaterial(materials);\n                }\n            }\n        }, {\n            key: 'element',\n            get: function get() {\n                return this._element == undefined ? null : this._element;\n            }\n        }, {\n            key: 'panel',\n            get: function get() {\n                return this._panel == undefined ? null : this._panel;\n            }\n        }]);\n\n        return SXMediaGallery;\n    }();\n\n    // A really lightweight plugin wrapper around the constructor, preventing against multiple instantiations\n\n\n    $.fn[pluginName] = function (options) {\n        return this.each(function () {\n            if (!$.data(this, 'plugin_' + pluginName)) {\n                $.data(this, 'plugin_' + pluginName, new SXMediaGallery(this, options));\n            }\n        });\n    };\n})(jQuery, window, document);"],"sourceRoot":"/source/"}